# å‡½æ•°å¼ç¼–ç¨‹

#### å‡½æ•°å¼ç¼–ç¨‹ï¼ˆfunctional programmingï¼‰ ç®€ä»‹

* ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject-oriented programmingï¼‰å’Œè¿‡ç¨‹å¼ç¼–ç¨‹ï¼ˆProcedural programmingï¼‰å¹¶åˆ—çš„ç¼–ç¨‹èŒƒå¼
* å‡½æ•°æ˜¯**ä¸€ç­‰å…¬æ°‘**ï¼ˆå®é™…ä¸Šè¯´çš„æ˜¯å®ƒä»¬å’Œå…¶ä»–å¯¹è±¡éƒ½ä¸€æ ·...æ‰€ä»¥å°±æ˜¯æ™®é€šå…¬æ°‘ï¼ˆåç»æµèˆ±çš„äººï¼Ÿï¼‰ã€‚å‡½æ•°çœŸæ²¡ä»€ä¹ˆç‰¹æ®Šçš„ï¼Œä½ å¯ä»¥åƒå¯¹å¾…ä»»ä½•å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·å¯¹å¾…å®ƒä»¬â€”â€”æŠŠå®ƒä»¬å­˜åœ¨æ•°ç»„é‡Œï¼Œå½“ä½œå‚æ•°ä¼ é€’ï¼Œèµ‹å€¼ç»™å˜é‡...ç­‰ç­‰ï¼‰ï¼Œæ‰€è°“ä¸€ç­‰å…¬æ°‘æŒ‡çš„æ˜¯ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºåŒç­‰åœ°ä½ï¼Œå¯ä»¥èµ‹å€¼ç»™å…¶ä»–å˜é‡ã€ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ ç»™å¦ä¸€ä¸ªå‡½æ•°ã€æˆ–è€…ä½œä¸ºåˆ«çš„å‡½æ•°çš„è¿”å›å€¼
* åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå˜é‡æ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„ï¼Œæ‰€æœ‰çš„å˜é‡åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡
* æ€»ç»“å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹ç‚¹ï¼š
  * å‡½æ•°æ˜¯`ä¸€ç­‰å…¬æ°‘`ï¼ˆå°±æ˜¯æ‰€æœ‰å˜é‡é‡Œé¢çš„è´µæ—ï¼Œä¼˜å…ˆè€ƒè™‘å‡½æ•°ï¼‰
  * åªç”¨`è¡¨è¾¾å¼` ï¼Œä¸ç”¨`è¯­å¥`ï¼Œåœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œé¢æ²¡æœ‰ `if else switch try catch ` ç­‰ï¼Œæ˜¯ç”¨æ•°å­¦çš„æ€ç»´å»è§£å†³é—®é¢˜
  * æ²¡æœ‰å‰¯ä½œç”¨ã€ä¸ä¿®æ”¹çŠ¶æ€ã€å¼•ç”¨é€æ˜ï¼ˆå‡½æ•°è¿è¡Œåªé å‚æ•°ï¼‰

#### çº¯å‡½æ•°
> çº¯å‡½æ•°æ˜¯è¿™æ ·ä¸€ç§å‡½æ•°ï¼Œå³ç›¸åŒçš„è¾“å…¥ï¼Œæ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å¯è§‚å¯Ÿçš„å‰¯ä½œç”¨ã€‚

* å¯¹äº**ç›¸åŒçš„è¾“å…¥**ï¼Œ**æ°¸è¿œå¾—åˆ°ç›¸åŒçš„è¾“å‡º**

  * ä½•ä¸ºç›¸åŒï¼šå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹æ¥è¯´ï¼ˆNaNé™¤å¤–ï¼ŒNaN å’Œ NaNè®¤ä¸ºæ˜¯ç›¸åŒçš„ï¼Œä½†ä»–ä»¬ä¸æ’ç­‰ï¼‰ï¼Œè‡ªç„¶æ˜¯ `===`ï¼Œå¯¹äºå¼•ç”¨ç±»å‹ï¼ˆObjectï¼ŒArrayï¼‰æ¥è¯´ï¼Œä¸è¦æ±‚`===`ï¼Œåªè¦ JSON.stringify çš„ç»“æœæ’ç­‰å°±è¡Œ(ä¹Ÿå°±æ˜¯å†…éƒ¨ç»“æ„ä¸€æ¨¡ä¸€æ ·çš„ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡è®¤ä¸ºæ˜¯ç›¸åŒçš„)ã€‚å¯¹äº å‡½æ•°ï¼Œåªè¦ä¸¤ä¸ªå‡½æ•°ï¼ˆå‡½æ•°ä½“é€»è¾‘ç›¸åŒï¼‰

* æ²¡æœ‰ä»»ä½•å¯è§‚å¯Ÿçš„å‰¯ä½œç”¨ï¼Œä¸ä¾èµ–å¤–éƒ¨ç¯å¢ƒçŠ¶æ€ï¼ˆsystem stateï¼‰

* ```javascript
  var a = [12, 5, 8, 1, 2, 3];
  //Array.slice æ˜¯çº¯å‡½æ•°ï¼Œå› ä¸ºå®ƒæ²¡æœ‰å‰¯ä½œç”¨ï¼Œå¹¶ä¸”å¯¹äºç›¸åŒçš„è¾“å…¥æ€»èƒ½å¾—åˆ°ç›¸åŒçš„è¾“å‡º
  a.slice(0, 3);
  a.slice(0, 3);
  a.slice(0, 3);
  a.slice(0, 3);
  //Array.splice å°±ä¸æ˜¯çº¯å‡½æ•°ï¼Œå®ƒä¿®æ”¹äº†åŸæ¥çš„æ•°ç»„(äº§ç”Ÿäº†å¯è§‚å¯Ÿåˆ°çš„å‰¯ä½œç”¨ï¼Œå³è¿™ä¸ªæ•°ç»„æ°¸ä¹…åœ°æ”¹å˜äº†
  //å¹¶ä¸”æ¯æ¬¡ç›¸åŒçš„è¾“å…¥ä¼šå¾—åˆ°ä¸åŒçš„è¾“å‡º
  ```
> åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬è®¨åŒè¿™ç§ä¼šæ”¹å˜æ•°æ®çš„ç¬¨å‡½æ•°ã€‚æˆ‘ä»¬è¿½æ±‚çš„æ˜¯é‚£ç§å¯é çš„ï¼Œæ¯æ¬¡éƒ½èƒ½è¿”å›åŒæ ·ç»“æœçš„å‡½æ•°ï¼Œè€Œä¸æ˜¯åƒ splice è¿™æ ·æ¯æ¬¡è°ƒç”¨åéƒ½æŠŠæ•°æ®å¼„å¾—ä¸€å›¢ç³Ÿçš„å‡½æ•°ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚
* `map` å’Œ `reduce` å°±æ˜¯æ ‡å‡†çš„ çº¯å‡½æ•°

![image-20181111123207194](./assert/image-20181111123207194.png)

```javascript
//memoizeå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œåˆ©ç”¨é—­åŒ…è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç¬¬ä¸€æ¬¡è¿è¡Œæ—¶ä¼šè®¡ç®—å€¼å¹¶å°†å…¶ç¼“å­˜ï¼Œä¹‹åä¼šä»ç¼“å­˜è¯»å–
const memoize = function(fn) {
    const cache = {};
    //åˆ©ç”¨é—­åŒ…å®ç°ç¼“å­˜
    return function() {
        const key = JSON.stringify(arguments);
        var value = cache[key];
        if(!value) {
            console.log('æ–°å€¼ï¼Œæ‰§è¡Œä¸­...');         // ä¸ºäº†äº†è§£è¿‡ç¨‹åŠ å…¥çš„logï¼Œæ­£å¼åœºåˆåº”è¯¥å»æ‰
            value = [fn.apply(this, arguments)];  // æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæ–¹ä¾¿åº”å¯¹undefinedï¼Œnullç­‰å¼‚å¸¸æƒ…å†µ
            cache[key] = value;
        } else {
            console.log('æ¥è‡ªç¼“å­˜');               // ä¸ºäº†äº†è§£è¿‡ç¨‹åŠ å…¥çš„logï¼Œæ­£å¼åœºåˆåº”è¯¥å»æ‰
        }
        return value[0];
    }
}

let a = memoize(function(x){return x*x;});
let result1 = a(5);
let result2 = a(5);
console.log(result1);
console.log(result2);
```



#### å¹‚ç­‰æ€§

* å¹‚ç­‰æ€§æ˜¯æŒ‡ å‡½æ•°æ‰§è¡Œæ— æ•°æ¬¡åè¿˜å…·æœ‰ç›¸åŒçš„æ•ˆæœï¼Œå¯¹äºåŒä¸€ä¸ªå‚æ•°ï¼Œå‡½æ•°è¿è¡Œä¸€æ¬¡å’Œè¿è¡Œä¸¤æ¬¡ç»“æœä¸€è‡´

```javascript
Math.abs(-12);// è¿™å°±ç¬¦åˆ å¹‚ç­‰æ€§
```

#### æŸ¯é‡ŒåŒ–ï¼ˆcurryï¼‰

* curry çš„æ¦‚å¿µå¾ˆç®€å•ï¼šåªä¼ é€’ç»™å‡½æ•°ä¸€éƒ¨åˆ†å‚æ•°æ¥è°ƒç”¨å®ƒï¼Œè®©å®ƒè¿”å›ä¸€ä¸ªå‡½æ•°å»å¤„ç†å‰©ä¸‹çš„å‚æ•°ã€‚

* æŸ¯é‡ŒåŒ– æ˜¯å°†**æ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æˆ åªæ¥å—ä¸€ä¸ªå‚æ•°çš„å‡½æ•°**ï¼Œå…¶å®æ˜¯å°†å‚æ•°å­˜èµ·æ¥ï¼ŒåŸç†å°±æ˜¯**é—­åŒ…**

* ```javascript
  // æ¯”å¦‚ä¸Šå›¾ä¸­çš„ å‡½æ•° checkage 
  var checkage18 = min => (age => age > min);
  ```

* ![image-20181111130914708](./assert/image-20181111130914708.png)
* å½“æˆ‘ä»¬è°ˆè®ºçº¯å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯´å®ƒä»¬æ¥å—ä¸€ä¸ªè¾“å…¥è¿”å›ä¸€ä¸ªè¾“å‡ºã€‚curry å‡½æ•°æ‰€åšçš„æ­£æ˜¯è¿™æ ·ï¼šæ¯ä¼ é€’ä¸€ä¸ªå‚æ•°è°ƒç”¨å‡½æ•°ï¼Œå°±è¿”å›ä¸€ä¸ªæ–°å‡½æ•°å¤„ç†å‰©ä½™çš„å‚æ•°ã€‚è¿™å°±æ˜¯ä¸€ä¸ªè¾“å…¥å¯¹åº”ä¸€ä¸ªè¾“å‡ºå•Šã€‚

#### å‡½æ•°ç»„åˆï¼ˆcomposeï¼‰

* æœ‰æ—¶å€™æˆ‘ä»¬å¾ˆå®¹æ˜“å†™å‡ºæ´‹è‘±å¼ä»£ç ï¼š`h(f(g(x)))`ï¼Œè¿™æ—¶å¯ä»¥è€ƒè™‘å‡½æ•°ç»„åˆ

* ```javascript
  const conpose = (f, g) => (x => f(g(x)));
  var first = arr => arr[0];
  var reverse = arr => arr.reverse();
  var last = conpose(first, reverse);
  console.log(last([1, 2, 3, 4, 5]));//5
  ```
  f å’Œ g éƒ½æ˜¯å‡½æ•°ï¼Œx æ˜¯åœ¨å®ƒä»¬ä¹‹é—´é€šè¿‡**â€œç®¡é“â€**ä¼ è¾“çš„å€¼ã€‚
  ç»„åˆçœ‹èµ·æ¥åƒæ˜¯åœ¨é¥²å…»å‡½æ•°ã€‚ä½ å°±æ˜¯é¥²å…»å‘˜ï¼Œé€‰æ‹©ä¸¤ä¸ªæœ‰ç‰¹ç‚¹åˆé­ä½ å–œæ¬¢çš„å‡½æ•°ï¼Œè®©å®ƒä»¬ç»“åˆï¼Œäº§ä¸‹ä¸€ä¸ªå´­æ–°çš„å‡½æ•°ã€‚
  åœ¨ compose çš„å®šä¹‰ä¸­ï¼Œg å°†å…ˆäº f æ‰§è¡Œï¼Œå› æ­¤å°±åˆ›å»ºäº†ä¸€ä¸ª**ä»å³åˆ°å·¦**çš„æ•°æ®æµã€‚è¿™æ ·åšçš„å¯è¯»æ€§è¿œè¿œé«˜äºåµŒå¥—ä¸€å¤§å †çš„å‡½æ•°è°ƒç”¨ï¼Œ**ä»å³åˆ°å·¦**æ‰§è¡Œæ›´åŠ èƒ½å¤Ÿåæ˜ æ•°å­¦ä¸Šçš„å«ä¹‰`(f(g(x))`

  ```javascript
  compose(toUpperCase, compose(head, reverse));
  // æˆ–è€…
  compose(compose(toUpperCase, head), reverse);//æ•ˆæœç›¸åŒ
  ```

  ä¸‹é¢çš„composeå‡½æ•°å¯ä»¥æ¥å—å¤šä¸ªå‚æ•°ï¼ˆå‡½æ•°ï¼‰ï¼ŒåŒæ—¶ç»„åˆå¤šä¸ªå‡½æ•°ï¼Œä¾ç„¶æ˜¯ä»å³åˆ°å·¦çš„æ•°æ®æµï¼š

  ```javascript
  //ç»„åˆå‡½æ•°-æ•°æ®æµä»å³åˆ°å·¦
  function compose() {
      let funcs = arguments;
      return function(x) {
          [...funcs].reverse().forEach(item => { x = item(x);});
          return x;
      }
  }
  var toUpperCase = function(x) { return x.toUpperCase(); };//å°†è¾“å…¥å­—ç¬¦ä¸²å˜ä¸ºå¤§äº›
  var exclaim = function(x) { return x + '!'; };//åœ¨å­—ç¬¦ä¸²åé¢åŠ ä¸€ä¸ªå­—ç¬¦ï¼š !
  var getLast = function(x) { return x[x.length - 2]; };//å–å¾—å€’æ•°ç¬¬äºŒä¸ªå­—ç¬¦
  let func = compose(getLast, exclaim, toUpperCase);
  console.log(func('qwqwqwx'));
  ```

  

## Pointfreeé£æ ¼ 

* è¯¦ç»†é˜è¿°å¯ä»¥çœ‹ [è¿™é‡Œ](http://www.ruanyifeng.com/blog/2017/03/pointfree.html)

* å¸®åŠ©æˆ‘ä»¬å‡å°‘ä¸å¿…è¦çš„å‘½åï¼Œä¿æŒä»£ç çš„ç®€ä»‹å’Œé€šç”¨ï¼Œä¸‹é¢éƒ¨åˆ†å†…å®¹å¼•äº†é˜®ä¸€å³°çš„åšå®¢

* **ç¨‹åºçš„æœ¬è´¨ï¼š**

![bg2017031202](./assert/bg2017031202.png)



ä¸Šå›¾æ˜¯ä¸€ä¸ªç¼–ç¨‹ä»»åŠ¡ï¼Œå·¦ä¾§æ˜¯æ•°æ®è¾“å…¥ï¼ˆinputï¼‰ï¼Œä¸­é—´æ˜¯ä¸€ç³»åˆ—çš„è¿ç®—æ­¥éª¤ï¼Œå¯¹æ•°æ®è¿›è¡ŒåŠ å·¥ï¼Œå³ä¾§æ˜¯æœ€åçš„æ•°æ®è¾“å‡ºï¼ˆoutputï¼‰ã€‚ä¸€ä¸ªæˆ–å¤šä¸ªè¿™æ ·çš„ä»»åŠ¡ï¼Œå°±ç»„æˆäº†ç¨‹åºã€‚

è¾“å…¥å’Œè¾“å‡ºï¼ˆç»Ÿç§°ä¸º I/Oï¼‰ä¸é”®ç›˜ã€å±å¹•ã€æ–‡ä»¶ã€æ•°æ®åº“ç­‰ç›¸å…³ï¼Œè¿™äº›è·Ÿæœ¬æ–‡æ— å…³ã€‚è¿™é‡Œçš„å…³é”®æ˜¯ï¼Œä¸­é—´çš„è¿ç®—éƒ¨åˆ†ä¸èƒ½æœ‰ I/O æ“ä½œï¼Œåº”è¯¥æ˜¯çº¯è¿ç®—ï¼Œå³é€šè¿‡çº¯ç²¹çš„æ•°å­¦è¿ç®—æ¥æ±‚å€¼ã€‚å¦åˆ™ï¼Œå°±åº”è¯¥æ‹†åˆ†å‡ºå¦ä¸€ä¸ªä»»åŠ¡ã€‚

I/O æ“ä½œå¾€å¾€æœ‰ç°æˆå‘½ä»¤ï¼Œå¤§å¤šæ•°æ—¶å€™ï¼Œç¼–ç¨‹ä¸»è¦å°±æ˜¯å†™ä¸­é—´çš„é‚£éƒ¨åˆ†è¿ç®—é€»è¾‘ã€‚ç°åœ¨ï¼Œä¸»æµå†™æ³•æ˜¯è¿‡ç¨‹å¼ç¼–ç¨‹å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä½†æ˜¯æˆ‘è§‰å¾—ï¼Œæœ€åˆé€‚çº¯è¿ç®—çš„æ˜¯å‡½æ•°å¼ç¼–ç¨‹ã€‚

* **å‡½æ•°çš„æ‹†åˆ†å’Œåˆæˆ**

![bg2017031203](./assert/bg2017031203.png)

* ```javascript
  const compose = (f, g) => (x => f(g(x))); // å…ˆè¿è¡Œ gå‡½æ•°ï¼Œå¾—åˆ°çš„ç»“æœå†ä¼ ç»™ f
  var uoUpperCase = word => word.toUpperCase();
  var split = x => (str => str.split(x));
  var f = compose(split(" "), uoUpperCase);
  var result = f("abcd efgh"); // å…ˆå°†å­—ç¬¦ä¸²è½¬ä¸ºå¤§å†™ï¼Œå†å®‰è£…ç©ºæ ¼åˆ†å‰²
  console.log(result); // [ 'ABCD', 'EFGH' ]
  ```

#### å£°æ˜å¼ä»£ç å’Œå‘½ä»¤å¼ä»£ç 

* å‘½ä»¤å¼ä»£ç ï¼šæˆ‘ä»¬é€šè¿‡ç¼–å†™ä¸€æ¡åˆä¸€æ¡çš„æŒ‡ä»¤å»è®©è®¡ç®—æœºæ‰§è¡Œä¸€äº›åŠ¨ä½œï¼Œè¿™å…¶ä¸­ä¸€èˆ¬éƒ½ä¼šæ¶‰åŠåˆ°**å¾ˆå¤šç¹æ‚çš„ç»†èŠ‚**ï¼Œè€Œå£°æ˜å¼å°±è¦ä¼˜é›…å¾ˆå¤šï¼Œæˆ‘ä»¬é€šè¿‡å†™è¡¨è¾¾å¼çš„æ–¹å¼æ¥å£°æ˜æˆ‘ä»¬æƒ³å¹²ä»€ä¹ˆï¼Œè€Œä¸æ˜¯é€šè¿‡ä¸€æ­¥ä¸€æ­¥çš„æŒ‡ç¤º

```javascript
// å‘½ä»¤å¼
let RDs = [];//å­˜æ”¾ å¼€å‘äººå‘˜çš„æ•°ç»„
for (var i = 0; i< companies.length; i++) {
    RDs.push(companies[i].rd);
}
// å£°æ˜å¼
let RDs = companies.map(c => c.rds);
```

#### é«˜é˜¶å‡½æ•°

> é«˜é˜¶å‡½æ•°ï¼šå‚æ•°æˆ–è¿”å›å€¼ä¸ºå‡½æ•°çš„å‡½æ•°

* å‡½æ•°å½“å‚æ•°ï¼ŒæŠŠä¼ å…¥çš„å‡½æ•°åšä¸€ä¸ªå°è£…ï¼Œç„¶è¿”å›è¿™ä¸ªå°è£…å‡½æ•°ï¼Œè¾¾åˆ°æ›´é«˜ç¨‹åº¦çš„æŠ½è±¡

* ```javascript
  var add = function(a, b) {
      return a + b;
  }
  function math(func, array) {
      return func(array(0), array(1));
  }
  math(add, [1,2]);
  ```

* é«˜é˜¶å‡½æ•°çš„æ€»ç»“ï¼š

    1. å®ƒæ˜¯ä¸€ç­‰å…¬æ°‘ï¼ˆå› ä¸ºæ˜¯å‡½æ•°ï¼‰
    2. å®ƒä»¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°
    3. ä»¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºè¿”å›ç»“æœ

* å †æ ˆæº¢å‡ºå’Œæ­»å¾ªç¯çš„åŒºåˆ«ï¼ˆçˆ†æ ˆæµè§ˆå™¨ä¼šæŠ¥é”™ï¼Œè€Œæ­»å¾ªç¯å¼æ ¹æœ¬æ²¡æœ‰åŠæ³•æ‰§è¡Œå…¶ä»–çš„ä¸œè¥¿ï¼‰

#### å°¾é€’å½’è°ƒç”¨

å°¾è°ƒç”¨ä¼˜åŒ–æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µ

* ä»€ä¹ˆæ˜¯**å°¾è°ƒç”¨**ï¼šä¸€å¥è¯è¯´æ¸…æ¥šï¼Œå°±æ˜¯æŒ‡**æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°**

* ```
  function f(x){
    return g(x);
  }
  //å‡½æ•°fçš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å‡½æ•°gï¼Œè¿™å°±å«å°¾è°ƒç”¨
  ```

* ```
  // æƒ…å†µä¸€
  function f(x){
    let y = g(x);
    return y;
  }
  //æƒ…å†µä¸€æ˜¯è°ƒç”¨å‡½æ•°gä¹‹åï¼Œè¿˜æœ‰åˆ«çš„æ“ä½œï¼Œæ‰€ä»¥ä¸å±äºå°¾è°ƒç”¨ï¼Œå³ä½¿è¯­ä¹‰å®Œå…¨ä¸€æ ·ã€‚
  //æƒ…å†µäºŒä¹Ÿå±äºè°ƒç”¨åè¿˜æœ‰æ“ä½œï¼Œå³ä½¿å†™åœ¨ä¸€è¡Œå†…ã€‚
  // æƒ…å†µäºŒ
  function f(x){
    return g(x) + 1;
  }
  ```

* ```javascript
  function f(x) {
    if (x > 0) {
      return m(x)
    }
    return n(x);
  }
  //å°¾è°ƒç”¨ä¸ä¸€å®šå‡ºç°åœ¨å‡½æ•°å°¾éƒ¨ï¼Œåªè¦æ˜¯æœ€åä¸€æ­¥æ“ä½œå³å¯
  ```

* å‡½æ•°è°ƒç”¨ä¼šåœ¨å†…å­˜å½¢æˆä¸€ä¸ª"è°ƒç”¨è®°å½•"ï¼Œåˆç§°"è°ƒç”¨å¸§"ï¼ˆcall frameï¼‰ï¼Œä¿å­˜è°ƒç”¨ä½ç½®å’Œå†…éƒ¨å˜é‡ç­‰ä¿¡æ¯ã€‚å¦‚æœåœ¨å‡½æ•°Açš„å†…éƒ¨è°ƒç”¨å‡½æ•°Bï¼Œé‚£ä¹ˆåœ¨Açš„è°ƒç”¨è®°å½•ä¸Šæ–¹ï¼Œè¿˜ä¼šå½¢æˆä¸€ä¸ªBçš„è°ƒç”¨è®°å½•ã€‚ç­‰åˆ°Bè¿è¡Œç»“æŸï¼Œå°†ç»“æœè¿”å›åˆ°Aï¼ŒBçš„è°ƒç”¨è®°å½•æ‰ä¼šæ¶ˆå¤±ã€‚å¦‚æœå‡½æ•°Bå†…éƒ¨è¿˜è°ƒç”¨å‡½æ•°Cï¼Œé‚£å°±è¿˜æœ‰ä¸€ä¸ªCçš„è°ƒç”¨è®°å½•æ ˆï¼Œä»¥æ­¤ç±»æ¨ã€‚æ‰€æœ‰çš„è°ƒç”¨è®°å½•ï¼Œå°±å½¢æˆä¸€ä¸ª["è°ƒç”¨æ ˆ"]ï¼ˆcall stackï¼‰

* å°¾è°ƒç”¨ç”±äºæ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿ç•™å¤–å±‚å‡½æ•°çš„è°ƒç”¨è®°å½•ï¼Œå› ä¸ºå¤–å±‚å‡½æ•°çš„è°ƒç”¨ä½ç½®ã€å†…éƒ¨å˜é‡ç­‰ä¿¡æ¯éƒ½ä¸ä¼šå†ç”¨åˆ°äº†ï¼Œå¯ä»¥é”€æ¯å…¶è°ƒç”¨æ ˆï¼Œåªè¦ç›´æ¥ç”¨å†…å±‚å‡½æ•°çš„è°ƒç”¨è®°å½•ï¼Œå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨è®°å½•å°±å¯ä»¥äº†

* ```javascript
  function f() {
    let m = 1;
    let n = 2;
    return g(m + n);
  }
  f();
  
  // ç­‰åŒäº
  function f() {
    return g(3);
  }
  f();
  
  // ç­‰åŒäº
  g(3);
  ```

* å¦‚æœå‡½æ•°gä¸æ˜¯å°¾è°ƒç”¨ï¼Œå‡½æ•°få°±éœ€è¦ä¿å­˜å†…éƒ¨å˜é‡må’Œnçš„å€¼ã€gçš„è°ƒç”¨ä½ç½®ç­‰ä¿¡æ¯ã€‚ä½†ç”±äºè°ƒç”¨gä¹‹åï¼Œå‡½æ•°få°±ç»“æŸäº†ï¼Œæ‰€ä»¥æ‰§è¡Œåˆ°æœ€åä¸€æ­¥ï¼Œå®Œå…¨å¯ä»¥åˆ é™¤ f() çš„è°ƒç”¨è®°å½•ï¼Œåªä¿ç•™ g(3) çš„è°ƒç”¨è®°å½•

* è¿™å°±å«åš"**å°¾è°ƒç”¨ä¼˜åŒ–**"ï¼ˆTail call optimizationï¼‰ï¼Œå³åªä¿ç•™å†…å±‚å‡½æ•°çš„è°ƒç”¨è®°å½•ã€‚å¦‚æœæ‰€æœ‰å‡½æ•°éƒ½æ˜¯å°¾è°ƒç”¨ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥åšåˆ°æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œè°ƒç”¨è®°å½•åªæœ‰ä¸€é¡¹ï¼Œè¿™å°†å¤§å¤§èŠ‚çœå†…å­˜ã€‚è¿™å°±æ˜¯"å°¾è°ƒç”¨ä¼˜åŒ–"çš„æ„ä¹‰

#### å°¾é€’å½’

> å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œç§°ä¸ºé€’å½’ã€‚å¦‚æœå°¾è°ƒç”¨è‡ªèº«ï¼Œå°±ç§°ä¸ºå°¾é€’å½’

é€’å½’éå¸¸è€—è´¹å†…å­˜ï¼Œå› ä¸ºéœ€è¦åŒæ—¶ä¿å­˜æˆåƒä¸Šç™¾ä¸ªè°ƒç”¨è®°å½•ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿ"æ ˆæº¢å‡º"é”™è¯¯ï¼ˆstack overflowï¼‰ã€‚ä½†å¯¹äºå°¾é€’å½’æ¥è¯´ï¼Œç”±äºåªå­˜åœ¨ä¸€ä¸ªè°ƒç”¨è®°å½•ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šå‘ç”Ÿ"æ ˆæº¢å‡º"é”™è¯¯

```javascript
function factorial(n) {
  if (n === 1) return 1;
  return n * factorial(n - 1);
}

factorial(5) // 120
//æ˜¯ä¸€ä¸ªé˜¶ä¹˜å‡½æ•°ï¼Œè®¡ç®—nçš„é˜¶ä¹˜ï¼Œæœ€å¤šéœ€è¦ä¿å­˜nä¸ªè°ƒç”¨è®°å½•ï¼Œå¤æ‚åº¦ O(n) 
```

```javascript
function factorial(n, total) {
  if (n === 1) return total;
  return factorial(n - 1, n * total);
}
//æ”¹å†™æˆå°¾é€’å½’ï¼Œåªä¿ç•™ä¸€ä¸ªè°ƒç”¨è®°å½•ï¼Œå¤æ‚åº¦ O(1)
factorial(5, 1) // 120
//è°ƒç”¨æ ˆå¦‚ä¸‹
//factorial(5, 1) -> factorial(4, 5) -> factorial(3, 20) -> factorial(2, 60) -> factorial(1, 120)
```

"å°¾è°ƒç”¨ä¼˜åŒ–"å¯¹é€’å½’æ“ä½œæ„ä¹‰é‡å¤§ï¼Œæ‰€ä»¥ä¸€äº›å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å°†å…¶å†™å…¥äº†è¯­è¨€è§„æ ¼ã€‚ES6ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œç¬¬ä¸€æ¬¡æ˜ç¡®è§„å®šï¼Œæ‰€æœ‰ ECMAScript çš„å®ç°ï¼Œéƒ½å¿…é¡»éƒ¨ç½²"å°¾è°ƒç”¨ä¼˜åŒ–"ã€‚è¿™å°±æ˜¯è¯´ï¼Œåœ¨ ES6 ä¸­ï¼Œåªè¦ä½¿ç”¨å°¾é€’å½’ï¼Œå°±ä¸ä¼šå‘ç”Ÿæ ˆæº¢å‡ºï¼Œç›¸å¯¹èŠ‚çœå†…å­˜

* æ³¨æ„âš ï¸ï¼šnodeåœ¨åç»­çš„ç‰ˆæœ¬ä¸­æ”¯æŒè¿‡å°¾å½’è°ƒç”¨ï¼ˆç»è¿‡å®éªŒ6.9.1æ˜¯æ”¯æŒå°¾è°ƒç”¨ä¼˜åŒ–çš„ï¼Œéœ€è¦åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼š`use strict` ä»¥åŠ è¿™æ ·å»å¼€å¯`node --harmony_tailcalls aaa.js`ï¼‰ï¼Œä½†åç»­ç»™å»æ‰äº†ï¼ˆæˆªæ­¢ç›®å‰11.6.0 æ˜¯ä¸€å¥å»æ‰äº†`--harmony_tailcalls`ï¼‰
* âš ï¸ï¼šæµè§ˆå™¨ä¸Šåªæœ‰**safari**æ”¯æŒï¼Œè€Œå…¶ä»–æµè§ˆå™¨ä¸Šå¹¶ä¸æ”¯æŒã€‚æ‰€ä»¥ï¼Œè¿™æ˜¯ä¸€ä¸ªâ€œæœªçœŸæ­£å®ç°çš„æè®®â€ï¼Œä»…ä»…äº†è§£ä¸‹å°±è¡Œï¼Œç›®å‰è¿˜æ— æ³•æ™®éç”¨åˆ°ç”Ÿäº§ç¯å¢ƒä¸­
* åŸºäºä»¥ä¸Šä¸¤ç‚¹ï¼Œåœ¨ `chrome` å’Œ `node `é‡Œé¢å®éªŒå°¾è°ƒç”¨çš„ä»£ç ï¼Œä¾ç„¶ä¼šå‡ºç°å †æ ˆæº¢å‡ºçš„

### é€’å½’å‡½æ•°çš„æ”¹å†™

ä¸‹é¢æœ‰3ç§æ–¹æ³•ç”¨äºé€’å½’å‡½æ•°çš„æ”¹å†™

```javascript
function tailFactorial(n, total) {
  if (n === 1) return total;
  return tailFactorial(n - 1, n * total);
}

function factorial(n) {
  return tailFactorial(n, 1);
}

factorial(5) // 120
```

```javascript
function currying(fn, n) {
  return function (m) {
    return fn.call(this, m, n);
  };
}

function tailFactorial(n, total) {
  if (n === 1) return total;
  return tailFactorial(n - 1, n * total);
}

const factorial = currying(tailFactorial, 1);

factorial(5) // 120
```

```javascript
function factorial(n, total = 1) {
  if (n === 1) return total;
  return factorial(n - 1, n * total);
}

factorial(5) // 120
```


#### å†è¯´é—­åŒ…
* åˆ«æ‹…å¿§å»ä½¿ç”¨é—­åŒ…ï¼Œé—­åŒ…æ˜¯æœ‰å†…å­˜æ³„æ¼ï¼Œé€‚å½“çš„ä½¿ç”¨æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå¯ä»¥ ` = null` å»æ‰‹åŠ¨é‡Šæ”¾
* é—­åŒ…å°±æ˜¯ æ‹¿åˆ°äº†ä½ æœ¬ä¸åº”è¯¥æ‹¿åˆ°çš„ä¸œè¥¿
* é—­åŒ…åœ¨å‰ç«¯å¯ä»¥éšæ„ä¸€ç‚¹ç”¨ï¼Œåœ¨nodeé‡Œé¢ä¸è¦éšä¾¿ä¹±ç”¨ï¼Œä¸€ä¸ªäººæ³„éœ²ä¸€ç‚¹ï¼Œäººå¤šäº†å°±ä¸è¡Œäº†
#### èŒƒç•´ä¸å®¹å™¨

* æˆ‘ä»¬å¯ä»¥æŠŠ`èŒƒç•´`æƒ³è±¡æˆä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢åŒ…å«ä¸¤æ ·ä¸œè¥¿ï¼Œå€¼ï¼ˆvalueï¼‰ã€å€¼çš„å˜å½¢å…³ç³»ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°
* å‡½æ•°ä¸ä»…å¯ä»¥ç”¨äºåŒä¸€ä¸ªèŒƒç•´ä¹‹ä¸­å€¼çš„è½¬æ¢ï¼Œè¿˜å¯ä»¥ç”¨äºå°†ä¸€ä¸ªèŒƒç•´è½¬æ¢æˆå¦ä¸€ä¸ªèŒƒç•´ï¼Œè¿™å°±æ¶‰åŠåˆ°äº† `å‡½å­ï¼ˆFunctorï¼‰`
* `å‡½å­`æ˜¯å‡½æ•°å¼ç¼–ç¨‹é‡Œé¢æœ€é‡è¦çš„æ•°æ®ç±»å‹ï¼Œä¹Ÿæ˜¯åŸºæœ¬çš„è¿ç®—å•ä½å’ŒåŠŸèƒ½å•ä½ã€‚å®ƒé¦–å…ˆæ˜¯ä¸€ç§èŒƒç•´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ˜¯ä¸€ä¸ªå®¹å™¨ï¼ŒåŒ…å«äº†å€¼å’Œå˜å½¢å…³ç³»ã€‚æ¯”è¾ƒç‰¹æ®Šçš„æ˜¯ï¼Œå®ƒçš„å˜å½¢å…³ç³»å¯ä»¥ä¾æ¬¡ä½œç”¨äºæ¯ä¸€ä¸ªå€¼ï¼Œå°†å½“å‰å®¹å™¨å˜å½¢æˆå¦ä¸€ä¸ªå®¹å™¨ã€‚

![image-20181111162112116](./assert/image-20181111162112116.png)

#### å‡½å­

* é¦–å…ˆ **å‡½å­** æ˜¯ä¸€ä¸ª**å®¹å™¨**

* ä»»ä½•å…·æœ‰ `map` æ–¹æ³•çš„æ•°æ®ç»“æ„ï¼Œéƒ½å¯ä»¥å½“ä½œå‡½å­çš„å®ç°

* ä¸‹é¢çš„ `Container` å«å®¹å™¨ï¼Œæœ‰äº† `map` è¿‡åå« å‡½å­

* ```javascript
  // è¿™æ˜¯ä¸€ä¸ªå®¹å™¨
  var Container = function(x) {
      this.__value = x;
  }
  // å‡½æ•°å¼ç¼–ç¨‹ä¸€èˆ¬çº¦å®šï¼Œå‡½å­åˆä¸€ä¸ª of æ–¹æ³•ï¼Œä¸ºäº†åŒºåˆ«äº oop
  Container.of = x => new Container(x);
  // ä¸€èˆ¬è¿˜çº¦å®šï¼Œå‡½å­çš„æ ‡å¿—å°±æ˜¯å®¹å™¨å…·æœ‰ map æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†å®¹å™¨é‡Œé¢çš„æ¯ä¸€ä¸ªå€¼ï¼Œæ˜ å°„åˆ°å¦ä¸€ä¸ªå®¹å™¨é‡Œé¢
  // map æ–¹æ³•æ¥å—ä¸€ä¸ª å˜å½¢å…³ç³» f
  Container.protorype.map = function(f) {
      return Container.of(f(this.__value));
  }
  Container.of(3)
  .map(x => x + 1)	// é€šè¿‡å˜å½¢å…³ç³»å¾—åˆ°ä¸€ä¸ªæ–°çš„å‡½å­ Container(4)
  .map(x => 'Result is' + x); // å¾—åˆ°å¦ä¸€ä¸ªå‡½å­ Container('Result is 4')
  ```

* ```javascript
  // å†™æˆ es6 å¦‚ä¸‹
  class Functor{
      constructor(val){
          this.val = val;
      }
      nap(f){
          return new Functor(f(this.val));
      }
  }
  ```

* ä¸Šé¢çš„ `Functor` å°±æ˜¯ä¸€ä¸ª å‡½å­ï¼Œå®ƒçš„ `map` æ–¹æ³•æ¥å—ä¸€ä¸ª å˜å½¢æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‡½å­

* å†æ¬¡é‡ç”³ä¸€ä¸‹ï¼šä¸€èˆ¬çº¦å®šï¼Œå‡½å­çš„æ ‡å¿—å°±æ˜¯å®¹å™¨å…·æœ‰ `map` æ–¹æ³•ã€‚è¯¥æ–¹æ³•å°†å®¹å™¨é‡Œé¢çš„æ¯ä¸€ä¸ªå€¼ï¼Œæ˜ å°„åˆ°å¦ä¸€ä¸ªå®¹å™¨

* å‡½æ•°å¼ç¼–ç¨‹é‡Œé¢çš„è¿ç®—ï¼Œéƒ½æ˜¯é€šè¿‡å‡½å­å®Œæˆçš„ï¼Œå­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹ï¼Œå®é™…ä¸Šå°±æ˜¯å­¦ä¹ å‡½å­çš„å„ç§è¿ç®—ï¼Œå°±æ˜¯è¿ç”¨ä¸åŒçš„å‡½å­ï¼Œè§£å†³å®é™…é—®é¢˜

##### maybe å‡½å­

* ç”¨ ä¸‰å…ƒå»åš æˆ–è€… `||`

* å‡½å­æ¥å—å„ç§å‡½æ•°ï¼Œå¤„ç†å®¹å™¨å†…éƒ¨çš„å€¼ã€‚è¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå®¹å™¨å†…éƒ¨çš„å€¼å¯èƒ½æ˜¯ä¸€ä¸ªç©ºå€¼ï¼ˆæ¯”å¦‚`null`ï¼‰ï¼Œè€Œå¤–éƒ¨å‡½æ•°æœªå¿…æœ‰å¤„ç†ç©ºå€¼çš„æœºåˆ¶ï¼Œå¦‚æœä¼ å…¥ç©ºå€¼ï¼Œå¾ˆå¯èƒ½å°±ä¼šå‡ºé”™ã€‚

* ```javascript
  let Maybe = function(x) {
      this.__value = x;
  }
  //æ¯ä¸€ä¸ªå®¹å™¨éƒ½æœ‰ä¸€ä¸ªofæ–¹æ³•ï¼Œç”¨æ¥ç”Ÿäº§ä¸€ä¸ªæ–°çš„å®¹å™¨
  Maybe.of = function(x) {
      return new Maybe(x);
  }
  //æœ‰mapæ–¹æ³•çš„å®¹å™¨å°±å«åšï¼šå‡½å­
  Maybe.prototype.map = function(f) {
      return this.isNothing() ? Maybe.of(null) : Maybe.of(f(this.__value));
  }
  Maybe.prototype.isNothing = function() {
      return this.__value === undefined || this.__value === null
  }
  Maybe.of(null).map(function (s) {
    return s.toUpperCase();
  });
  ```



##### Eitherå‡½å­

æ¡ä»¶è¿ç®—`if...else`æ˜¯æœ€å¸¸è§çš„è¿ç®—ä¹‹ä¸€ï¼Œå‡½æ•°å¼ç¼–ç¨‹é‡Œé¢ï¼Œä½¿ç”¨ Either å‡½å­è¡¨è¾¾

Either å‡½å­å†…éƒ¨æœ‰ä¸¤ä¸ªå€¼ï¼šå·¦å€¼ï¼ˆ`Left`ï¼‰å’Œå³å€¼ï¼ˆ`Right`ï¼‰ã€‚å³å€¼æ˜¯æ­£å¸¸æƒ…å†µä¸‹ä½¿ç”¨çš„å€¼ï¼Œå·¦å€¼æ˜¯å³å€¼ä¸å­˜åœ¨æ—¶ä½¿ç”¨çš„é»˜è®¤å€¼ã€‚

```javascript
class Either extends Functor {
  constructor(left, right) {
    this.left = left;
    this.right = right;
  }

  map(f) {
    return this.right ? 
      Either.of(this.left, f(this.right)) :
      Either.of(f(this.left), this.right);
  }
}

Either.of = function (left, right) {
  return new Either(left, right);
};
```

```javascript
var addOne = function (x) {
  return x + 1;
};

Either.of(5, 6).map(addOne);
// Either(5, 7);

Either.of(1, null).map(addOne);
// Either(2, null);
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå³å€¼æœ‰å€¼ï¼Œå°±ä½¿ç”¨å³å€¼ï¼Œå¦åˆ™ä½¿ç”¨å·¦å€¼ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒEither å‡½å­è¡¨è¾¾äº†æ¡ä»¶è¿ç®—ã€‚

Either å‡½å­çš„å¸¸è§ç”¨é€”æ˜¯æä¾›é»˜è®¤å€¼

```javascript
Either
.of({address: 'xxx'}, currentUser.address)
.map(updateField);
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰æä¾›åœ°å€ï¼ŒEither å‡½å­å°±ä¼šä½¿ç”¨å·¦å€¼çš„é»˜è®¤åœ°å€ã€‚

Either å‡½å­çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯ä»£æ›¿`try...catch`ï¼Œä½¿ç”¨å·¦å€¼è¡¨ç¤ºé”™è¯¯

```javascript
function parseJSON(json) {
  try {
    return Either.of(null, JSON.parse(json));
  } catch (e: Error) {
    return Either.of(e, null);
  }
}
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå·¦å€¼ä¸ºç©ºï¼Œå°±è¡¨ç¤ºæ²¡æœ‰å‡ºé”™ï¼Œå¦åˆ™å·¦å€¼ä¼šåŒ…å«ä¸€ä¸ªé”™è¯¯å¯¹è±¡`e`ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ‰€æœ‰å¯èƒ½å‡ºé”™çš„è¿ç®—ï¼Œéƒ½å¯ä»¥è¿”å›ä¸€ä¸ª Either å‡½å­

##### apå‡½å­

å‡½å­é‡Œé¢åŒ…å«çš„å€¼ï¼Œå®Œå…¨å¯èƒ½æ˜¯å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥æƒ³è±¡è¿™æ ·ä¸€ç§æƒ…å†µï¼Œä¸€ä¸ªå‡½å­çš„å€¼æ˜¯æ•°å€¼ï¼Œå¦ä¸€ä¸ªå‡½å­çš„å€¼æ˜¯å‡½æ•°

```javascript
function addTwo(x) {
  return x + 2;
}

const A = Functor.of(2);
const B = Functor.of(addTwo)
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½å­`A`å†…éƒ¨çš„å€¼æ˜¯`2`ï¼Œå‡½å­`B`å†…éƒ¨çš„å€¼æ˜¯å‡½æ•°`addTwo`ã€‚

æœ‰æ—¶ï¼Œæˆ‘ä»¬æƒ³è®©å‡½å­`B`å†…éƒ¨çš„å‡½æ•°ï¼Œå¯ä»¥ä½¿ç”¨å‡½å­`A`å†…éƒ¨çš„å€¼è¿›è¡Œè¿ç®—ã€‚è¿™æ—¶å°±éœ€è¦ç”¨åˆ° ap å‡½å­ã€‚

ap æ˜¯ applicativeï¼ˆåº”ç”¨ï¼‰çš„ç¼©å†™ã€‚å‡¡æ˜¯éƒ¨ç½²äº†`ap`æ–¹æ³•çš„å‡½å­ï¼Œå°±æ˜¯ ap å‡½å­

```javascript
class Ap extends Functor {
  ap(F) {
    return Ap.of(this.val(F.val));
  }
}
```

æ³¨æ„ï¼Œ`ap`æ–¹æ³•çš„å‚æ•°ä¸æ˜¯å‡½æ•°ï¼Œè€Œæ˜¯å¦ä¸€ä¸ªå‡½å­ã€‚

å› æ­¤ï¼Œå‰é¢ä¾‹å­å¯ä»¥å†™æˆä¸‹é¢çš„å½¢å¼

```javascript
Ap.of(addTwo).ap(Functor.of(2))
// Ap(4)
```

ap å‡½å­çš„æ„ä¹‰åœ¨äºï¼Œå¯¹äºé‚£äº›å¤šå‚æ•°çš„å‡½æ•°ï¼Œå°±å¯ä»¥ä»å¤šä¸ªå®¹å™¨ä¹‹ä¸­å–å€¼ï¼Œå®ç°å‡½å­çš„é“¾å¼æ“ä½œ

```javascript
function add(x) {
  return function (y) {
    return x + y;
  };
}

Ap.of(add).ap(Maybe.of(2)).ap(Maybe.of(3));
// Ap(5)
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå‡½æ•°`add`æ˜¯æŸ¯é‡ŒåŒ–ä»¥åçš„å½¢å¼ï¼Œä¸€å…±éœ€è¦ä¸¤ä¸ªå‚æ•°ã€‚é€šè¿‡ ap å‡½å­ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°ä»ä¸¤ä¸ªå®¹å™¨ä¹‹ä¸­å–å€¼ã€‚å®ƒè¿˜æœ‰å¦å¤–ä¸€ç§å†™æ³•

```javascript
Ap.of(add(2)).ap(Maybe.of(3));
```

#### Monad å‡½å­





##### IOå‡½å­





#### å‡½æ•°å¼ç¼–ç¨‹ç›¸å…³åº“

* RxJS [å®˜ç½‘](https://cn.rx.js.org/) ç›®å‰å·²ç»ä¸é‚£ä¹ˆğŸ”¥äº†ï¼Œæµè§ˆå™¨å·²ç»å®ç°äº†
* cycleJs
* underscorejs
* lodash
* [Ramda](http://ramda.cn/)

